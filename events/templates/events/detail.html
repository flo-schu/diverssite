{% extends "page/base_generic.html" %}
{% block content %}

<!-- <style>
.d-flex.w-100.justify-content-between{
    background-color: inherit;
    border-bottom: 1px solid gray;
}

/*
.container-fluid{
    padding-bottom: 50px;
} */
</style> -->
<div class="row d-flex pt-3 pb-3 m-0">
    <form class="col-md-12 p-0 m-0" action="{% url 'events:index' %}" href="?next={{ request.path }}" method="post" name="participation">
        {% csrf_token %}
        <div class="row m-0 pl-2 pr-2 bg-light">
            {% include "events/sidebar.html" %}
        </div>
        <div class="sticky-top row m-0 p-2 bg-light justify-content-between">
            <div class="col m-0">
                <span class="badge badge-warning" type="button" onclick="window.location.href='{% url 'events:categ' 'training' %}';">training</span>
                <span class="badge badge-success" type="button" onclick="window.location.href='{% url 'events:categ' 'tournament' %}';">tournaments</span>
                <span class="badge badge-primary" type="button" onclick="window.location.href='{% url 'events:categ' 'social' %}';">social</span>
                <span class="badge badge-secondary" type="button" onclick="window.location.href='{% url 'events:categ' 'other' %}';">other</span>
                </div>

                <div class="col m-0">
                {% if user.is_staff %}
                <a class="btn btn-primary rounded mb-1" type="button" name="button" href="{% url 'admin:events_event_add' %}">
                    add an event
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-plus-circle">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="12" y1="8" x2="12" y2="16"></line>
                    <line x1="8" y1="12" x2="16" y2="12"></line>
                    </svg>
                </a>
                {% endif %} 
                {% if user.is_authenticated %}
                <button class="btn btn-primary rounded mb-1" type="submit">save</button>
                {% endif %}
            </div>

        </div>

        <div class="card">
            <div class="card-header">
                event
                {{event.name}}
            </div>
            <div class="card-body p-0 mt-0">
                <ul class="list-group list-group-flush">
                    {% if user.is_authenticated %}
                        <li class="list-group-item pl-2 pt-0 pr-2 pb-1 mb-0 mt-0">
                            <div class="row">
                                <div class="col">
                                    <small>who's in? üëç</small>
                                </div>
                            </div>
                            <!-- <hr style="margin:1px; padding:0px"> -->
                            <div class="row float-left pl-0 ml-0" style="line-height:1;">
                                {% for p in participants %}
                                    {% if p.part.choice == "y" %}
                                        <div class="col m-0 p-0">
                                            <img src="{{ p.person.profile.thumb_url }}"
                                                    class="img m-0 p-0"
                                                    alt="{{ p.person.first_name }}"
                                                    style="object-fit:cover;
                                width:70px;
                                height:70px;
                                border: solid 0px #CCC"/>
                                            <br class="p-0 m-0">
                                            <small class="pt-0 mt-0">{{ p.person.first_name }}</small>
                                        </div>
                                    {% endif %}
                                {% endfor %}
                            </div>
                        </li>
                        <li class="list-group-item pl-2 pt-0 pr-2 mb-0 mt-0 pb-1">
                            <div class="row">
                                <div class="col">
                                    <small>who's out? üëé</small>
                                </div>
                            </div>
                            <div class="row float-left pl-0 ml-0" style="line-height:1;">
                                {% for p in participants %}
                                    {% if p.part.choice == "n" %}
                                        <div class="col m-0 p-0">
                                            <img src="{{ p.person.profile.thumb_url }}"
                                                    class="img m-0 p-0"
                                                    alt="{{ p.person.first_name }}"
                                                    style="object-fit:cover;
                                width:70px;
                                height:70px;
                                border: solid 1px #CCC"/>
                                            <br>
                                            <small>{{ p.person.first_name }}</small>
                                        </div>
                                    {% endif %}
                                {% endfor %}
                            </div>
                        </li>
                        <li class="list-group-item pl-2 pt-0 pr-2 pb-1 mb-0 mt-0">
                            <div class="row">
                                <div class="col">
                                    <small>who doesn't know yet? ü§î</small>
                                </div>
                            </div>
                            <div class="row float-left pl-0 ml-0" style="line-height:1;">
                                {% for p in participants %}
                                    {% if p.part.choice == "m" %}
                                        <div class="col m-0 p-0">
                                            <img src="{{ p.person.profile.thumb_url }}"
                                                    class="img m-0 p-0"
                                                    alt="{{ p.person.first_name }}"
                                                    style="object-fit:cover;
                                width:70px;
                                height:70px;
                                border: solid 1px #CCC"/>
                                            <br>
                                            <small>{{ p.person.first_name }}</small>
                                        </div>
                                    {% endif %}
                                {% endfor %}
                            </div>
                        </li>
                    {% endif %}
                    <li class="list-group-item pl-2 pb-0 pt-2 pr-2">
                        <small>
                            {{ event.formatted_markdown|safe }}
                        </small>
                    </li>
                    {% if user.is_staff %}
                        <li class="list-group-item pl-2 pt-2 pb-2 pr-2">
                            <div class="d-flex w-100 justify-content-between m-0">

                                <a class="btn btn-light m-0" role="button"
                                    href="{% url 'admin:events_event_change' event.id %}?next={{ request.path }}">
                                    edit event
                                </a>
                            </div>
                        </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </form>
</div>
{% endblock %}
